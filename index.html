<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Notre Histoire ‚ù§Ô∏è</title>
<style>
body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  background:#0f0f1a;
  color:white;
  overflow-x:hidden;
}
canvas{position:fixed;top:0;left:0;z-index:-1;}
.page{
  display:none;
  height:100vh;
  justify-content:center;
  align-items:center;
  padding:40px;
  transition:all 0.8s;
  overflow-y:auto;
}
.active{display:flex;animation:fade 0.8s;}
.card{
  position:relative;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(15px);
  border-radius:25px;
  padding:40px;
  max-width:600px;
  width:100%;
  box-shadow:0 20px 60px rgba(0,0,0,0.5);
  text-align:center;
  overflow:visible;
  transition:0.3s;
}
.card:hover{box-shadow:0 25px 70px rgba(255,77,136,0.5);}
button{
  padding:12px 22px;
  margin:10px;
  border:none;
  border-radius:12px;
  background:#ff4d88;
  color:white;
  cursor:pointer;
  font-size:16px;
  transition:0.3s;
}
button:hover{box-shadow:0 0 15px #ff4d88;}

/* BOUTONS ROMANTIQUES OUI/NON */
.btn-romantic{
  position:relative;
  padding:20px 50px;
  margin:20px 10px;
  font-size:24px;
  font-weight:bold;
  border:none;
  border-radius:20px;
  cursor:pointer;
  overflow:hidden;
  transition:all 0.4s ease;
  text-transform:uppercase;
  letter-spacing:2px;
}

.btn-oui{
  background:linear-gradient(135deg, #ff4d88 0%, #ff8fab 50%, #ffd700 100%);
  background-size:200% 200%;
  animation:gradientFlow 3s ease infinite;
  box-shadow:
    0 10px 30px rgba(255,77,136,0.4),
    0 0 20px rgba(255,77,136,0.3),
    inset 0 1px 0 rgba(255,255,255,0.3);
  transform:scale(1.1);
}

.btn-oui:hover{
  transform:scale(1.2) translateY(-5px);
  box-shadow:
    0 15px 40px rgba(255,77,136,0.6),
    0 0 40px rgba(255,77,136,0.5),
    0 0 60px rgba(255,215,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.5);
}

.btn-oui:active{
  transform:scale(1.15) translateY(-2px);
}

.btn-non{
  background:linear-gradient(135deg, rgba(100,100,120,0.3), rgba(80,80,100,0.4));
  border:2px solid rgba(255,255,255,0.2);
  color:rgba(255,255,255,0.7);
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.btn-non:hover{
  background:linear-gradient(135deg, rgba(120,120,140,0.4), rgba(100,100,120,0.5));
  border-color:rgba(255,255,255,0.3);
  color:rgba(255,255,255,0.9);
  box-shadow:0 8px 20px rgba(0,0,0,0.4);
}

@keyframes gradientFlow{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

.btn-shine{
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.3),
    transparent
  );
  transition:0.5s;
}

.btn-oui:hover .btn-shine{
  left:100%;
}

.btn-text{
  position:relative;
  z-index:2;
  text-shadow:0 2px 4px rgba(0,0,0,0.2);
}

.btn-oui .btn-text{
  animation:textPulse 2s ease-in-out infinite;
}

@keyframes textPulse{
  0%,100%{text-shadow:0 2px 4px rgba(0,0,0,0.2), 0 0 10px rgba(255,215,0,0.3);}
  50%{text-shadow:0 2px 4px rgba(0,0,0,0.2), 0 0 20px rgba(255,215,0,0.6);}
}
.flip{perspective:1000px;margin:10px;}
.flip-inner{
  width:140px;height:140px;
  position:relative;
  transform-style:preserve-3d;
  transition:0.6s;
}
.flip:hover .flip-inner{transform:rotateY(180deg);}
.flip-front,.flip-back{
  position:absolute;width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;
  border-radius:12px;
  background:rgba(255,255,255,0.1);
  backface-visibility:hidden;
}
.flip-back{transform:rotateY(180deg);background:#ff4d88;}
@keyframes fade{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

.heart-explosion{
  position:absolute;
  font-size:30px;
  animation:explode 2s ease-out forwards;
}
@keyframes explode{
  0%{transform:translate(0,0) scale(0);opacity:1;}
  100%{transform:translate(var(--x),var(--y)) scale(1);opacity:0;}
}
.love-message{
  font-size:48px;
  font-weight:bold;
  background:linear-gradient(45deg,#ff4d88,#ff8fab,#ffd700);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:glow 2s ease-in-out infinite;
  margin:20px 0;
}
@keyframes glow{
  0%,100%{filter:brightness(1);}
  50%{filter:brightness(1.5);}
}
.subtitle-message{
  font-size:20px;
  margin:20px 0;
  opacity:0;
  animation:fadeInUp 1s ease-out 0.5s forwards;
}
@keyframes fadeInUp{
  from{opacity:0;transform:translateY(20px);}
  to{opacity:1;transform:translateY(0);}
}

.quiz-header{margin-bottom:25px;}
.quiz-header h2{
  font-size:28px;
  margin-bottom:15px;
  background:linear-gradient(45deg,#ff4d88,#ff8fab);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}
.progress-container{margin:15px 0;}
.progress-bar{
  width:100%;height:6px;
  background:rgba(255,255,255,0.1);
  border-radius:10px;overflow:hidden;margin:10px 0;
}
.progress-fill{
  height:100%;
  background:linear-gradient(90deg,#ff4d88,#ff8fab);
  width:0%;transition:width 0.5s ease;
  box-shadow:0 0 10px #ff4d88;
}
.progress-text{font-size:14px;opacity:0.8;margin-top:5px;}
.question-container{
  min-height:250px;display:flex;
  flex-direction:column;justify-content:center;align-items:center;
}
.question-number{
  display:inline-block;
  background:linear-gradient(135deg,#ff4d88,#ff8fab);
  color:white;padding:5px 15px;border-radius:20px;
  font-size:13px;font-weight:bold;margin-bottom:15px;
}
.question-text{
  font-size:22px;margin:20px 0 30px 0;
  font-weight:500;line-height:1.4;
}
.quiz-options{
  display:flex;flex-direction:column;gap:12px;
  width:100%;max-width:450px;margin:0 auto;
}
.quiz-btn{
  padding:16px 20px;
  background:rgba(255,255,255,0.08);
  border:2px solid rgba(255,77,136,0.3);
  border-radius:15px;color:white;cursor:pointer;
  font-size:16px;transition:all 0.3s;
  width:100%;text-align:center;
}
.quiz-btn:hover:not(:disabled){
  border-color:#ff4d88;
  background:rgba(255,77,136,0.15);
  transform:translateY(-2px);
  box-shadow:0 5px 15px rgba(255,77,136,0.3);
}
.quiz-btn:disabled{cursor:not-allowed;opacity:0.5;}
.quiz-btn.correct{
  background:rgba(76,217,100,0.2);
  border-color:#4cd964;animation:pulse 0.5s;
}
.quiz-btn.wrong{
  background:rgba(255,77,136,0.2);
  border-color:#ff4d88;animation:shake 0.5s;
}
.score-display{text-align:center;padding:20px;}
.score-number{
  font-size:56px;font-weight:bold;
  background:linear-gradient(45deg,#ff4d88,#ff8fab);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;margin:15px 0;
}
.score-message{font-size:18px;margin:15px 0;font-style:italic;line-height:1.5;}
@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.05);}
}
@keyframes shake{
  0%,100%{transform:translateX(0);}
  25%{transform:translateX(-10px);}
  75%{transform:translateX(10px);}
}
.confetti{
  position:fixed;width:10px;height:10px;background:#ff4d88;
  animation:confetti-fall 3s linear forwards;z-index:9999;
}
@keyframes confetti-fall{
  to{transform:translateY(100vh) rotate(360deg);opacity:0;}
}

.poeme-container{
  position:relative;height:320px;overflow:hidden;
  border-radius:20px;background:rgba(255,255,255,0.05);
  backdrop-filter:blur(12px);padding:20px;
  box-shadow:inset 0 0 20px rgba(0,0,0,0.4);
}
.poeme-scroll{
  position:absolute;bottom:-100%;width:100%;
  text-align:center;font-size:18px;line-height:1.7;
  animation:scrollUp 55s linear forwards;
}
@keyframes scrollUp{
  from{bottom:-100%;}
  to{bottom:100%;}
}
.poeme-scroll p{margin:6px 0;}

/* PAGE 7 FINALE */
#p7{
  display:none;
  background:#000;
  overflow-y:auto;
  overflow-x:hidden;
}
#p7.active{display:block;}

.final-section{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:80px 20px;
  position:relative;
}

/* √âTOILES */
#starrySection{
  background:linear-gradient(180deg,#0a0a15 0%,#1a0a2e 50%,#0f0f1a 100%);
}
.star{
  position:absolute;width:3px;height:3px;
  background:white;border-radius:50%;
  animation:twinkle 3s infinite;
}
@keyframes twinkle{
  0%,100%{opacity:0.3;}
  50%{opacity:1;}
}
.shooting-star{
  position:absolute;width:2px;height:2px;
  background:white;box-shadow:0 0 10px 2px white;
  animation:shoot 3s ease-out forwards;
}
@keyframes shoot{
  0%{transform:translateX(0) translateY(0);opacity:1;}
  100%{transform:translateX(300px) translateY(300px);opacity:0;}
}
.constellation-heart{
  position:relative;z-index:2;font-size:150px;
  animation:heartBeat 2s infinite;
  filter:drop-shadow(0 0 30px #ff4d88) drop-shadow(0 0 60px #ff4d88);
}
@keyframes heartBeat{
  0%,100%{transform:scale(1);}
  25%{transform:scale(1.15);}
  50%{transform:scale(1);}
}

/* INDICATION SCROLL */
.scroll-indicator{
  position:relative;
  z-index:3;
  margin-top:50px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
  animation:bounceDown 2s ease-in-out infinite;
}
@keyframes bounceDown{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(15px);}
}
.scroll-text{
  font-size:20px;
  color:#ff8fab;
  text-shadow:0 0 10px rgba(255,139,171,0.8);
  font-style:italic;
}
.scroll-arrow{
  font-size:50px;
  color:#ff4d88;
  filter:drop-shadow(0 0 15px #ff4d88);
}

/* BOULE CRISTAL */
#crystalSection{
  background:linear-gradient(180deg,#0f0f1a 0%,#1a1a3e 50%,#000 100%);
}
.crystal-ball-container{
  position:relative;width:400px;height:400px;margin:40px auto;
}
.crystal-ball{
  width:100%;height:100%;border-radius:50%;
  background:radial-gradient(circle at 35% 35%,rgba(255,255,255,0.4),rgba(138,43,226,0.3),rgba(75,0,130,0.5),rgba(30,0,60,0.8));
  box-shadow:
    0 0 60px rgba(138,43,226,0.8),
    0 0 120px rgba(138,43,226,0.6),
    0 0 180px rgba(138,43,226,0.4),
    inset 0 0 60px rgba(255,255,255,0.2),
    inset -30px -30px 60px rgba(138,43,226,0.3);
  animation:crystalGlow 4s ease-in-out infinite;
  position:relative;overflow:hidden;
}
@keyframes crystalGlow{
  0%,100%{
    box-shadow:
      0 0 60px rgba(138,43,226,0.8),
      0 0 120px rgba(138,43,226,0.6),
      0 0 180px rgba(138,43,226,0.4),
      inset 0 0 60px rgba(255,255,255,0.2),
      inset -30px -30px 60px rgba(138,43,226,0.3);
    transform:scale(1);
  }
  50%{
    box-shadow:
      0 0 80px rgba(138,43,226,1),
      0 0 160px rgba(138,43,226,0.8),
      0 0 240px rgba(138,43,226,0.6),
      inset 0 0 80px rgba(255,255,255,0.3),
      inset -40px -40px 80px rgba(138,43,226,0.4);
    transform:scale(1.05);
  }
}
.crystal-shine{
  position:absolute;top:15%;left:25%;
  width:100px;height:100px;
  background:radial-gradient(circle,rgba(255,255,255,0.9),rgba(255,255,255,0.4),transparent);
  border-radius:50%;animation:shine 3s ease-in-out infinite;
}
@keyframes shine{
  0%,100%{opacity:0.6;transform:scale(1);}
  50%{opacity:1;transform:scale(1.2);}
}
.crystal-glow-ring{
  position:absolute;top:50%;left:50%;
  width:100%;height:100%;border-radius:50%;
  border:3px solid rgba(138,43,226,0.5);
  transform:translate(-50%,-50%);
  animation:pulseRing 3s ease-in-out infinite;
}
@keyframes pulseRing{
  0%,100%{transform:translate(-50%,-50%) scale(1);opacity:0.5;}
  50%{transform:translate(-50%,-50%) scale(1.2);opacity:0.8;}
}
.crystal-content{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  width:70%;text-align:center;
  font-size:22px;font-weight:bold;color:white;
  text-shadow:
    0 0 10px rgba(255,255,255,1),
    0 0 20px rgba(138,43,226,0.8),
    0 0 30px rgba(138,43,226,0.6);
  animation:textGlow 3s ease-in-out infinite;
}
@keyframes textGlow{
  0%,100%{
    text-shadow:
      0 0 10px rgba(255,255,255,1),
      0 0 20px rgba(138,43,226,0.8),
      0 0 30px rgba(138,43,226,0.6);
  }
  50%{
    text-shadow:
      0 0 15px rgba(255,255,255,1),
      0 0 30px rgba(138,43,226,1),
      0 0 45px rgba(138,43,226,0.8);
  }
}

/* TO BE CONTINUED */
.to-be-continued{
  font-size:70px;font-weight:bold;text-align:center;
  background:linear-gradient(45deg,#ffd700,#ff8fab,#ff4d88);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:epicGlow 3s ease-in-out infinite;
  letter-spacing:8px;text-transform:uppercase;
  margin:150px 0 200px 0;position:relative;z-index:10;
  filter:drop-shadow(0 0 20px rgba(255,215,0,0.6)) drop-shadow(0 0 40px rgba(255,77,136,0.4));
}
@keyframes epicGlow{
  0%,100%{
    transform:scale(1);
    filter:drop-shadow(0 0 20px rgba(255,215,0,0.6)) drop-shadow(0 0 40px rgba(255,77,136,0.4));
  }
  50%{
    transform:scale(1.08);
    filter:drop-shadow(0 0 40px rgba(255,215,0,1)) drop-shadow(0 0 80px rgba(255,77,136,0.8));
  }
}
.cinema-bars{
  position:fixed;width:100%;height:80px;background:#000;z-index:5;
}
.cinema-bar-top{top:0;box-shadow:0 10px 30px rgba(0,0,0,0.8);}
.cinema-bar-bottom{bottom:0;box-shadow:0 -10px 30px rgba(0,0,0,0.8);}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<!-- PAGE 0 -->
<div class="page active" id="p0">
  <div class="card">
    <h1>‚ù§Ô∏è J'ai quelque chose pour toi ‚ù§Ô∏è</h1>
    <button onclick="go(1)">Commencer</button>
  </div>
</div>

<!-- PAGE 1 -->
<div class="page" id="p1">
  <div class="card" id="cardQ">
    <h1>Est-ce que tu m'aimes ? ‚ù§Ô∏è</h1>
    <button id="oui" class="btn-romantic btn-oui">
      <span class="btn-shine"></span>
      <span class="btn-text">Oui ‚ù§Ô∏è</span>
    </button>
    <button id="non" class="btn-romantic btn-non">
      <span class="btn-text">Non üò≠</span>
    </button>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="p2">
  <div class="card" style="position:relative;overflow:hidden;">
    <div id="heartContainer" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"></div>
    <div class="love-message">Je t'aime aussi ! ‚ù§Ô∏è</div>
    <div class="subtitle-message">Tu viens de rendre mon c≈ìur si heureux...</div>
    <button onclick="go(3)" style="margin-top:30px;opacity:0;animation:fadeInUp 1s ease-out 1.5s forwards;">
      D√©couvre notre histoire ‚ú®
    </button>
  </div>
</div>

<!-- PAGE 3 -->
<div class="page" id="p3">
  <div class="card">
    <h1 id="typing"></h1>
    <h2 id="compteur"></h2>
    <button onclick="go(4)">Suite</button>
  </div>
</div>

<!-- PAGE 4 -->
<div class="page" id="p4">
  <div class="card" style="max-width:750px;">
    <h2 style="font-size:32px;margin-bottom:20px;background:linear-gradient(45deg,#ff4d88,#ff8fab);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">
      Puisque je te le dois ‚ù§Ô∏è
    </h2>
    <p id="citation" style="font-style:italic;opacity:0.8;margin-bottom:25px;"></p>
    <div class="poeme-container">
      <div class="poeme-scroll">
        <p>Je n'ai ni or, ni couronne,</p>
        <p>des mots, parfois maladroits,</p>
        <p>Mais Il y a dans tes beaux yeux Hazel,</p>
        <p>toute la douceur de ta silhouette</p>
        <p>qui m'enlace avec tendresse √† chaque fois</p>
        <br>
        <p>Et si aimer est une douce folie,</p>
        <p>Alors je veux bien perdre la raison,</p>
        <p>Car depuis toi, depuis ta vie,</p>
        <p>Mon c≈ìur perdu a trouv√© sa maison.</p>
        <br>
        <p>Je t'aime d'un amour qui tremble et br√ªle,</p>
        <p>Qui doute parfois, mais jamais ne ment,</p>
        <p>Le matin, je pense √† toi sans recul,</p>
        <p>Et le soir, ton sourire me rend vivant.</p>
        <br>
        <p>Je promets mes mots, mes gestes et mes nuits,</p>
        <p>Je promets mes silences et mes pens√©es,</p>
        <p>Je promets que tu seras mon seul abri,</p>
        <p>Dans la temp√™te, dans l'amour, dans la beaut√©.</p>
        <br>
        <p>Quand je doute, je pense √† toi,</p>
        <p>Et la vie retrouve son sens,</p>
        <p>Justine, mon monde s'illumine,</p>
        <p>Et tout devient parfait.</p>
      </div>
    </div>
    <button onclick="go(5)" style="margin-top:25px;">Suite ‚ù§Ô∏è</button>
  </div>
</div>

<!-- PAGE 5 -->
<div class="page" id="p5">
  <div class="card">
    <div class="quiz-header">
      <h2>Quiz de notre amour üíï</h2>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar"></div>
        </div>
        <div class="progress-text">Question <span id="currentQ">1</span> sur <span id="totalQ">5</span></div>
      </div>
    </div>
    <div class="question-container" id="questionContainer"></div>
    <div id="finalScore" style="display:none;">
      <div class="score-display">
        <div style="font-size:24px;margin-bottom:10px;">üèÜ Ton score d'amour</div>
        <div class="score-number" id="scoreNumber">0/5</div>
        <div class="score-message" id="scoreMessage"></div>
        <button onclick="restartQuiz()" style="margin-top:20px;font-size:18px;padding:15px 30px;">
          Recommencer le quiz ‚ù§Ô∏è
        </button>
        <button onclick="go(6)" style="margin-top:10px;font-size:16px;padding:12px 25px;">
          Continuer l'histoire ‚ù§Ô∏è
        </button>
      </div>
    </div>
  </div>
</div>

<!-- PAGE 6 -->
<div class="page" id="p6">
  <div class="card">
    <h2>üéµ Ce n'est que le d√©but...</h2>
    <p style="margin-bottom:20px;">
      Notre histoire ne fait que commencer ‚ù§Ô∏è<br>
      Alors j'ai pr√©par√© une playlist pour toi‚Ä¶
    </p>
    <iframe style="border-radius:12px"
      src="https://open.spotify.com/embed/playlist/0qEB0XTqUOnfsxeagY3DoT?utm_source=generator&theme=0"
      width="100%" height="352" frameborder="0" allowfullscreen=""
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
    </iframe>
    <h3 style="margin-top:25px;">‚ù§Ô∏è Jauge d'amour ‚ù§Ô∏è</h3>
    <div style="width:100%;height:20px;background:rgba(255,255,255,0.1);border-radius:20px;overflow:hidden;margin-top:10px;">
      <div id="loveBar" style="height:100%;width:0%;background:linear-gradient(90deg,#ff4d88,#ff8fab);transition:0.3s;"></div>
    </div>
    <h2 id="loveScore">0%</h2>
    <button onclick="addLove()">Ajoute de l'amour ‚ù§Ô∏è</button>
  </div>
</div>

<!-- PAGE 7 FINALE -->
<div id="p7">
  <div class="cinema-bars cinema-bar-top"></div>
  <div class="cinema-bars cinema-bar-bottom"></div>
  
  <!-- √âTOILES -->
  <div class="final-section" id="starrySection">
    <div class="constellation-heart">‚ù§Ô∏è</div>
    <div class="scroll-indicator">
      <div class="scroll-text">Descends pour la suite...</div>
      <div class="scroll-arrow">‚¨á</div>
    </div>
  </div>

  <!-- BOULE CRISTAL -->
  <div class="final-section" id="crystalSection">
    <div class="crystal-ball-container">
      <div class="crystal-glow-ring"></div>
      <div class="crystal-ball">
        <div class="crystal-shine"></div>
        <div class="crystal-content" id="crystalText">Notre Futur...</div>
      </div>
    </div>
  </div>

  <!-- TO BE CONTINUED -->
  <div class="final-section" style="background:#000;">
    <div class="to-be-continued">To Be<br>Continued...</div>
  </div>
</div>

<script>
function go(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("p"+n).classList.add("active");
  if(n===2) createHeartExplosion();
  if(n===5) initQuiz();
  if(n===7) initFinalPage();
}

const non=document.getElementById("non");
const card=document.getElementById("cardQ");
let scale=1;
non.onmouseover=()=>{
  scale*=0.9;
  non.style.transform="scale("+scale+")";
  non.style.position="absolute";
  non.style.left=Math.random()*(card.clientWidth-100)+"px";
  non.style.top=Math.random()*(card.clientHeight-50)+"px";
};

document.getElementById("oui").onclick=()=>go(2);

function createHeartExplosion(){
  const container=document.getElementById('heartContainer');
  container.innerHTML='';
  for(let i=0;i<20;i++){
    setTimeout(()=>{
      const heart=document.createElement('div');
      heart.className='heart-explosion';
      heart.innerText='‚ù§Ô∏è';
      const angle=(Math.PI*2*i)/20;
      const distance=150+Math.random()*100;
      const x=Math.cos(angle)*distance;
      const y=Math.sin(angle)*distance;
      heart.style.setProperty('--x',x+'px');
      heart.style.setProperty('--y',y+'px');
      container.appendChild(heart);
      setTimeout(()=>heart.remove(),2000);
    },i*50);
  }
}

let txt="Bienvenue dans notre histoire ‚ù§Ô∏è";
let i=0;
function type(){
  if(i<txt.length){
    document.getElementById("typing").innerHTML+=txt[i];
    i++;setTimeout(type,40);
  }
}

const observer=new MutationObserver((mutations)=>{
  mutations.forEach((mutation)=>{
    if(mutation.target.id==='p3'&&mutation.target.classList.contains('active')){
      i=0;
      document.getElementById("typing").innerHTML="";
      setTimeout(type,500);
    }
  });
});
observer.observe(document.getElementById('p3'),{attributes:true,attributeFilter:['class']});

const date=new Date("2025-11-11");
setInterval(()=>{
  let j=Math.floor((new Date()-date)/86400000);
  document.getElementById("compteur").innerText=j+" jours avec toi ‚ù§Ô∏è";
},1000);

const questions=[
  {question:"üíï Qui a dit 'je t'aime' en premier ?",options:["Moi üòä","Toi üíñ"],correct:0},
  {question:"ü§™ Qui est le plus fou/folle ?",options:["Moi üôÉ","Clairement toi üòú"],correct:1},
  {question:"üòÇ Qui est le plus dr√¥le ?",options:["Moi sans discussion üé≠","Bon c'est peut-√™tre toi üé™"],correct:1},
  {question:"üåπ Qui est le plus romantique ?",options:["Moi √©videmment üíù","Pourquoi tu regardes 'Toi' ? üëÄ"],correct:0},
  {question:"üôã‚Äç‚ôÇÔ∏è Qui casse le plus de choses?",options:["ü•∫ Je pense que c'est moi","T'es quand m√™me pas loin de moiüòÖ"],correct:1}
];

let currentQuestion=0;
let score=0;

function initQuiz(){
  currentQuestion=0;
  score=0;
  document.getElementById('finalScore').style.display='none';
  document.getElementById('questionContainer').style.display='block';
  document.getElementById('totalQ').innerText=questions.length;
  showQuestion();
}

function showQuestion(){
  const q=questions[currentQuestion];
  const container=document.getElementById('questionContainer');
  container.innerHTML=`
    <span class="question-number">Question ${currentQuestion+1}</span>
    <div class="question-text">${q.question}</div>
    <div class="quiz-options">
      ${q.options.map((opt,idx)=>
        `<button class="quiz-btn" onclick="selectAnswer(${idx})">${opt}</button>`
      ).join('')}
    </div>
  `;
  updateProgress();
}

function selectAnswer(selectedIdx){
  const q=questions[currentQuestion];
  const buttons=document.querySelectorAll('.quiz-btn');
  buttons.forEach(btn=>btn.disabled=true);
  if(selectedIdx===q.correct){
    buttons[selectedIdx].classList.add('correct');
    score++;
    createConfetti();
  }else{
    buttons[selectedIdx].classList.add('wrong');
    buttons[q.correct].classList.add('correct');
  }
  setTimeout(()=>{
    currentQuestion++;
    if(currentQuestion<questions.length){
      showQuestion();
    }else{
      showFinalScore();
    }
  },1500);
}

function updateProgress(){
  const progress=((currentQuestion+1)/questions.length)*100;
  document.getElementById('progressBar').style.width=progress+'%';
  document.getElementById('currentQ').innerText=currentQuestion+1;
}

function showFinalScore(){
  document.getElementById('questionContainer').style.display='none';
  document.getElementById('scoreNumber').innerText=score+'/'+questions.length;
  let message='';
  if(score===5)message="Parfait ! Tu me connais par c≈ìur ! ü•∞";
  else if(score>=3)message="Tr√®s bien ! Notre amour est fort ! üíï";
  else if(score>=2)message="Pas mal ! On apprend encore l'un sur l'autre ! üòä";
  else message="On doit passer plus de temps ensemble ! üíñ";
  document.getElementById('scoreMessage').innerText=message;
  document.getElementById('finalScore').style.display='block';
  if(score===5){
    for(let i=0;i<30;i++){
      setTimeout(()=>createConfetti(),i*100);
    }
  }
}

function restartQuiz(){initQuiz();}

function createConfetti(){
  const colors=['#ff4d88','#ff8fab','#ffd700','#ff69b4','#ff1493'];
  for(let i=0;i<15;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=(Math.random()*window.innerWidth)+'px';
    confetti.style.top='-20px';
    confetti.style.background=colors[Math.floor(Math.random()*colors.length)];
    confetti.style.transform='rotate('+(Math.random()*360)+'deg)';
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),3000);
  }
}

const citations=[
  "L'amour est la po√©sie des sens.",
  "Je t'aime plus que tout.",
  "Chaque jour avec toi est un cadeau.",
  "Mon c≈ìur bat pour toi.",
  "Nous sommes faits l'un pour l'autre."
];
document.getElementById("citation").innerText=citations[Math.floor(Math.random()*citations.length)];

const c=document.getElementById("bg");
const ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;
let part=[];
for(let i=0;i<80;i++)
  part.push({x:Math.random()*c.width,y:Math.random()*c.height,r:2});
function anim(){
  ctx.clearRect(0,0,c.width,c.height);
  part.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,6.28);
    ctx.fillStyle="white";ctx.fill();
    p.y+=0.2;if(p.y>c.height)p.y=0;
  });
  requestAnimationFrame(anim);
}
anim();

let love=0;
function addLove(){
  if(love<100){
    love+=1;
    document.getElementById("loveBar").style.width=love+"%";
    document.getElementById("loveScore").innerText=love+"%";
    if(love===100){
      for(let i=0;i<100;i++){
        setTimeout(()=>createConfetti(),i*50);
      }
      setTimeout(()=>{
        go(7);
      },2000);
    }
  }
}

function initFinalPage(){
  createStarField();
  createShootingStars();
  animateCrystalBall();
}

function createStarField(){
  const section=document.getElementById('starrySection');
  for(let i=0;i<300;i++){
    const star=document.createElement('div');
    star.className='star';
    star.style.left=Math.random()*100+'%';
    star.style.top=Math.random()*100+'%';
    star.style.animationDelay=Math.random()*3+'s';
    star.style.width=star.style.height=(Math.random()*4+1)+'px';
    section.appendChild(star);
  }
}

function createShootingStars(){
  setInterval(()=>{
    const star=document.createElement('div');
    star.className='shooting-star';
    star.style.left=Math.random()*70+'%';
    star.style.top=Math.random()*50+'%';
    document.getElementById('starrySection').appendChild(star);
    setTimeout(()=>star.remove(),3000);
  },2000);
}

function animateCrystalBall(){
  const messages=["Notre Futur...","Ensemble","En vrai j'esp√®re qu'on aura un chien","Dans 5 ans...","Le mariage t'esp√®re heinnnn","La boule de cristal est un peu floue mais je vois...","Beaucoup de bonheur ‚ù§Ô∏è","Chichiiiii"];
  let index=0;
  setInterval(()=>{
    const text=document.getElementById('crystalText');
    text.style.opacity='0';
    text.style.transition='opacity 0.5s';
    setTimeout(()=>{
      text.innerText=messages[index];
      text.style.opacity='1';
      index=(index+1)%messages.length;
    },500);
  },3500);
}
</script>
</body>
</html>
